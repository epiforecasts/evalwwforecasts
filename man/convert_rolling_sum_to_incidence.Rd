% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/convert_rolling_sum_to_incidence.R
\name{convert_rolling_sum_to_incidence}
\alias{convert_rolling_sum_to_incidence}
\title{Convert rolling sums to incidence data}
\usage{
convert_rolling_sum_to_incidence(
  rolling_sums,
  k = 7,
  initial_values = NULL,
  return_same_length = TRUE
)
}
\arguments{
\item{rolling_sums}{A numeric vector of k-day rolling sums}

\item{k}{Integer indicating the number of days that the rolling sums are
computed over. Default is 7.}

\item{initial_values}{A numeric vector of the first k-1 incident values
that contribute to the first rolling sum. If NULL, assumes zeros for the
initial 6 days.}
}
\value{
A numeric vector of incident values.
}
\description{
This function converts k-day rolling sums of count data back to daily
incidence values. It uses the difference between successive rolling sums
to recover the incident values, handling the initial period appropriately.
}
\details{
The conversion works as follows:
\itemize{
\item For the first k days, we use the provided initial values plus
derived values.
\item For subsequent days,
incidence\link{t} = rolling_sum\link{t} - rolling_sum\link{t-1} + incidence\link{t-k}
}

This is based on the relationship:
rolling_sum\link{t} = sum(daily_incidence\link{(t-k+1):t})
}
\examples{
# Example with simple data
y <- sample(5, 20, replace = TRUE)
rolling_sums <- zoo::rollsum(y_daily, k = 7, na.pad = FALSE)
initial_vals <- y[1:6]
daily_incidence <- convert_rolling_sum_to_incidence(rolling_sums,
  k = 7,
  initial_vals
)
daily_incidence
}
